<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monthly Update</title>
    <link rel="stylesheet" href="./src/style.css" />
</head>

<body>
    <div class="container">

        <button id="logoutBtn" style="float: right; margin: 10px;">Logout</button>

        <form id="updateForm">
            <h2>Monthly Update</h2>

            <label for="pypName">PYP‚Äôs Name:</label>
            <input type="text" id="pypName" name="pypName" required />

            <label for="updatePeriod">Update Period:</label>
            <input type="text" id="updatePeriod" name="updatePeriod" required />

            <label for="entity">Entity:</label>
            <input type="text" id="entity" name="entity" required />

            <label for="department">Department:</label>
            <input type="text" id="department" name="department" required />

            <label for="supervisorName">Supervisor‚Äôs Name:</label>
            <input type="text" id="supervisorName" name="supervisorName" required />

            <label for="mentorName">Mentor‚Äôs Name:</label>
            <input type="text" id="mentorName" name="mentorName" required />

            <label for="assignments">Summary of key assignments or duties during this period:</label>
            <textarea id="assignments" name="assignments" rows="4" required></textarea>

            <label for="dutyChanges">Significant changes to duties during the month:</label>
            <textarea id="dutyChanges" name="dutyChanges" rows="3"></textarea>

            <label for="contribution">How do you think you have contributed to your host-entity during the period under
                review?</label>
            <textarea id="contribution" name="contribution" rows="3" required></textarea>

            <label for="notableExperience">What was your most notable experience during the period?</label>
            <textarea id="notableExperience" name="notableExperience" rows="3"></textarea>

            <label for="mentorRelationship">How would you describe the relationship between you and your mentor?</label>
            <textarea id="mentorRelationship" name="mentorRelationship" rows="3" required></textarea>

            <label for="supervisorRelationship">How would you describe the relationship between you and your
                supervisor?</label>
            <textarea id="supervisorRelationship" name="supervisorRelationship" rows="3" required></textarea>

            <label for="colleagueRelationship">How would you describe the relationship between you and your
                colleagues?</label>
            <textarea id="colleagueRelationship" name="colleagueRelationship" rows="3" required></textarea>

            <label for="worked">What has worked for you at your host-entity?</label>
            <textarea id="worked" name="worked" rows="3"></textarea>

            <label for="notWorked">What has not worked for you at your host-entity?</label>
            <textarea id="notWorked" name="notWorked" rows="3"></textarea>

            <label for="addressChallenges">How do you plan to address the challenges highlighted above?</label>
            <textarea id="addressChallenges" name="addressChallenges" rows="3"></textarea>

            <label for="support">In what ways can your mentor and/or supervisor be of support to you in the upcoming
                period?</label>
            <textarea id="support" name="support" rows="3"></textarea>

            <label for="training">What additional training would you like to receive to help improve your job
                performance?</label>
            <textarea id="training" name="training" rows="3"></textarea>

            <label for="salaryReceived">Did you receive your last month salary?</label>
            <select id="salaryReceived" name="salaryReceived" required>
                <option value="">-- Select an option --</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>

            <label for="noSalaryReason">If No, why?</label>
            <textarea id="noSalaryReason" name="noSalaryReason" rows="2"></textarea>

            <label for="signature">PYP‚Äôs Signature:</label>
            <input type="text" id="signature" name="signature" required />

            <label for="signedDate">Date:</label>
            <input type="date" id="signedDate" name="signedDate" required />

            <button type="submit">Submit Monthly Update</button>


        </form>
    </div>

    <script>

        // if (sessionStorage.getItem("role") !== "pyp") {
        //     window.location.href = "login.html"; // block unauthorized roles
        // }

        // Redirect to login if not logged in
        if (!sessionStorage.getItem("isLoggedIn")) {
            window.location.href = "index.html";
        }

        // Logout button with confirmation
        document.getElementById("logoutBtn").addEventListener("click", function () {
            const confirmLogout = confirm("Are you sure you want to log out?");
            if (confirmLogout) {
                sessionStorage.clear();
                window.location.href = "index.html"; // Redirect to login page
            }
        });
    </script>


    <script>

        const form = document.getElementById("updateForm");

        form.addEventListener("submit", function (e) {
            e.preventDefault();

            const formData = new FormData(form);
            const data = {};

            // Collect form data
            formData.forEach((value, key) => {
                data[key] = value;
            });

            // Display thank-you confirmation (or redirect to thank-you page if you have one)
            alert("Your monthly update has been successfully submitted!");

            // OPTIONAL: Save to Google Sheet via Apps Script (if already integrated)

            // Clear session and redirect to login page
            sessionStorage.clear(); // üîê Log out
            window.location.href = "login.html"; // üîÅ Redirect to login
        });
    </script>
    <script src="./src/script.js"></script>


</body>

</html>